import{e as h,f as u,g as f,j as g,o as x,c as V,w as i,a as r,b as p,t as n,l as e,n as y,d as _,s as w}from"./index-CZ-jeGgE.js";import{d as b,V as k,b as v}from"./VGrid-CH5CbTjN.js";import{V as S}from"./VChip-g2OJaZBF.js";import{V as T}from"./VDataTableServer-DJDxiQR8.js";import{V as C}from"./VRow-DoNlnVNA.js";import{V as D}from"./VTextField-DVzsUNSV.js";import{V as P}from"./VDivider-CQdL7re9.js";import{V as U}from"./VContainer-CikPPT_X.js";import"./forwardRefs-DpN468t2.js";import"./VList-Ek6lQ_m-.js";import"./VOverlay-BVQB-fyf.js";import"./scopeId-BoLFKdBO.js";const E=h("auditlog",{state:()=>({page:1,limit:10,total:0,items:[],index:-1,search:"",pages:[10,25,50,100],valid:!1,loading:!1,dialog:!1,headers:()=>{const{t:o}=u();return[{title:o("text.method"),key:"method",width:"10%"},{title:o("text.url"),key:"url",width:"10%"},{title:o("text.name"),key:"name",width:"10%"},{title:o("text.updated_by"),key:"updated_by",width:"5%"},{title:o("text.updated_at"),key:"updated_at",width:"5%"},{title:o("text.data"),key:"data"}]},filter:{search:null}}),actions:{async fnSearch(){this.search=Math.random().toString()},async fnList({page:o=1,itemsPerPage:t=10,sortBy:l=[]}){this.loading=!0;const d={page:o,limit:t,sorts:l.length?`${l[0].key}.${l[0].order}`:""};for(const s of Object.keys(this.filter))this.filter[s]&&(d[s]=this.filter[s]);const{data:{items:c,total:m}}=await f({url:"/cms/v1/auditlogs",params:d});this.items=c,this.total=m,this.loading=!1}}}),L={class:"text-capitalize"},I={__name:"index",setup(o){const t=E(),{t:l}=u(),d=g(),c=(m="")=>({POST:"text-success",PUT:"text-warning",DELETE:"text-error",GET:"text-info"})[m];return(m,s)=>(x(),V(U,null,{default:i(()=>[r(S,{color:"primary",variant:"flat",class:"mb-4 px-5"},{default:i(()=>[r(b,{icon:"mdi-post-outline",size:"20",start:"",class:"mb-0"}),p("h3",null,n(e(l)("sidebar.auditlog")),1)]),_:1}),r(v,{class:"elevation-3 px-4"},{default:i(()=>[r(T,{"must-sort":"","items-per-page":e(t).limit,"onUpdate:itemsPerPage":s[2]||(s[2]=a=>e(t).limit=a),"items-per-page-options":e(t).pages,headers:e(t).headers(),items:e(t).items,"items-length":e(t).total,loading:e(t).loading,"show-current-page":"",search:e(t).search,"item-value":"log_id",density:"compact",class:"text-no-wrap","fixed-header":"","onUpdate:options":e(t).fnList},{"item.method":i(({item:a})=>[p("span",{class:y(c(a.method))},n(a.method),3)]),"item.name":i(({item:a})=>[p("span",L,n(a.name),1)]),"item.updated_at":i(({item:a})=>[_(n(e(d).format(a.updated_at,"fullDate")),1)]),"item.data":i(({item:a})=>[p("code",null,n(a.data),1)]),top:i(()=>[r(C,{class:"justify-space-between ga-2 my-4 mx-0"},{default:i(()=>[r(k,{"max-width":"350"},{default:i(()=>[r(D,{modelValue:e(t).filter.search,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).filter.search=a),density:"compact",variant:"outlined",color:"primary",placeholder:e(l)("text.search_auditlog"),"append-inner-icon":"mdi-magnify",clearable:"","hide-details":"",onKeyup:s[1]||(s[1]=w(a=>e(t).fnSearch(),["enter"]))},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),r(P)]),_:2},1032,["items-per-page","items-per-page-options","headers","items","items-length","loading","search","onUpdate:options"])]),_:1})]),_:1}))}};export{I as default};
