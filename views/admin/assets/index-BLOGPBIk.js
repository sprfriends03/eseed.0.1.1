import{u as L,e as q,f as P,g as T,p as N,h as F,z as A,i as B,j as E,o as V,c as v,w as a,a as t,b as c,t as o,l as e,m as p,d as m,q as D,s as K,v as M}from"./index-CZ-jeGgE.js";import{d as _,V as R,b as $,f as S,e as j,g as U}from"./VGrid-CH5CbTjN.js";import{V as G}from"./VChip-g2OJaZBF.js";import{V as H}from"./VDataTableServer-DJDxiQR8.js";import{V as h,a as z,b as J}from"./VTooltip-w28TotOc.js";import{V as g}from"./forwardRefs-DpN468t2.js";import{V as Q}from"./VRow-DoNlnVNA.js";import{V as O}from"./VTextField-DVzsUNSV.js";import{V as W}from"./VForm-BoKOpqf4.js";import{V as X}from"./VCol-CjVdm_MB.js";import{V as I}from"./VDivider-CQdL7re9.js";import{a as Y,V as x,b as y}from"./VList-Ek6lQ_m-.js";import{V as Z}from"./VContainer-CikPPT_X.js";import"./VOverlay-BVQB-fyf.js";import"./scopeId-BoLFKdBO.js";const ee=L(),te=q("client",{state:()=>({page:1,limit:10,total:0,items:[],index:-1,search:"",pages:[10,25,50,100],valid:!1,loading:!1,dialog:!1,dialogDetail:!1,dialogDel:!1,headers:()=>{const{t:d}=P(),r=[{title:d("text.name"),key:"name",width:"10%"},{title:d("text.client_id"),key:"client_id",width:"10%"},{title:d("text.client_secret"),key:"client_secret",width:"10%"},{title:d("text.secure_key"),key:"secure_key"},{title:d("text.updated_by"),key:"updated_by",width:"5%"},{title:d("text.updated_at"),key:"updated_at",width:"5%"}];return ee.hasPermissions(["client_update","client_delete"])&&r.push({title:d("text.actions"),key:"actions",width:"5%",align:"center",sortable:!1}),r},rules:()=>{const{t:d}=P();return{required:r=>!!r||d("rule.required"),min1:r=>!!r&&r.length>0||d("rule.required")}},filter:{search:null},model:{client_id:"",name:""},default:{client_id:"",name:""}}),actions:{async fnSearch(){this.search=Math.random().toString()},async fnList({page:d=1,itemsPerPage:r=10,sortBy:b=[]}){this.loading=!0;const l={page:d,limit:r,sorts:b.length?`${b[0].key}.${b[0].order}`:""};for(const f of Object.keys(this.filter))this.filter[f]&&(l[f]=this.filter[f]);const{data:{items:n,total:w}}=await T({url:"/cms/v1/clients",params:l});this.items=n,this.total=w,this.loading=!1},async fnCancel(){this.index=-1,this.dialog=!1,this.dialogDetail=!1,this.dialogDel=!1,this.model=Object.assign({},this.default)},async fnDetailItem(d){this.dialogDetail=!0,this.model=Object.assign({},d),this.index=this.items.indexOf(d)},async fnEditItem(d){this.dialog=!0,this.model=Object.assign({},d),this.index=this.items.indexOf(d)},async fnDelItem(d){this.dialogDel=!0,this.model=Object.assign({},d),this.index=this.items.indexOf(d)},async fnSave(){if(this.loading=!0,this.valid){const{success:d,data:r}=this.index==-1?await N({url:"/cms/v1/clients",body:this.model}):await F({url:`/cms/v1/clients/${this.model.client_id}`,body:this.model});d&&(this.index==-1?this.items.unshift(r):this.items[this.index]=r,await this.fnCancel())}this.loading=!1},async fnDel(){this.loading=!0;const{success:d}=await A({url:`/cms/v1/clients/${this.model.client_id}`});d&&(await this.fnCancel(),this.fnSearch()),this.loading=!1}}}),ae={class:"d-flex align-center"},le={class:"font-weight-regular"},ie={class:"d-flex align-center"},se={class:"font-weight-regular"},ne={class:"d-flex align-center"},oe={class:"font-weight-regular"},de={class:"d-flex flex-row justify-center align-center ga-2 my-2"},re={class:"font-weight-regular"},ce={class:"d-flex align-center"},me={class:"font-weight-regular"},ue={class:"d-flex align-center"},fe={class:"font-weight-regular"},pe={class:"d-flex align-center"},ge={class:"font-weight-regular"},_e={class:"font-weight-regular"},he={class:"font-weight-regular"},xe={class:"text-primary"},Oe={__name:"index",setup(d){const r=L(),b=B(),l=te(),{t:n}=P(),w=E(),f=(C="")=>`${C.substring(0,6)}......${C.substring(C.length-6)}`;return(C,s)=>(V(),v(Z,null,{default:a(()=>[t(G,{color:"primary",variant:"flat",class:"mb-4 px-5"},{default:a(()=>[t(_,{icon:"mdi-key",size:"20",start:"",class:"mb-1"}),c("h3",null,o(e(n)("sidebar.client")),1)]),_:1}),t($,{class:"elevation-3 px-4"},{default:a(()=>[t(H,{"must-sort":"","items-per-page":e(l).limit,"onUpdate:itemsPerPage":s[16]||(s[16]=i=>e(l).limit=i),"items-per-page-options":e(l).pages,headers:e(l).headers(),items:e(l).items,"items-length":e(l).total,loading:e(l).loading,"show-current-page":"",search:e(l).search,"item-value":"client_id",density:"compact",class:"text-no-wrap","fixed-header":"","onUpdate:options":e(l).fnList},{"item.client_id":a(({item:i})=>[c("span",ae,[c("span",le,o(f(i.client_id)),1),t(h,{text:e(n)("action.copy")},{activator:a(({props:u})=>[t(_,p(u,{size:"18",class:"ml-1",onClick:k=>e(r).fnCopy(i.client_id)}),{default:a(()=>[m("mdi-content-copy")]),_:2},1040,["onClick"])]),_:2},1032,["text"])])]),"item.client_secret":a(({item:i})=>[c("span",ie,[c("span",se,o(f(i.client_secret)),1),t(h,{text:e(n)("action.copy")},{activator:a(({props:u})=>[t(_,p(u,{size:"18",class:"ml-1",onClick:k=>e(r).fnCopy(i.client_secret)}),{default:a(()=>[m("mdi-content-copy")]),_:2},1040,["onClick"])]),_:2},1032,["text"])])]),"item.secure_key":a(({item:i})=>[c("span",ne,[c("span",oe,o(f(i.secure_key)),1),t(h,{text:e(n)("action.copy")},{activator:a(({props:u})=>[t(_,p(u,{size:"18",class:"ml-1",onClick:k=>e(r).fnCopy(i.secure_key)}),{default:a(()=>[m("mdi-content-copy")]),_:2},1040,["onClick"])]),_:2},1032,["text"])])]),"item.updated_at":a(({item:i})=>[m(o(e(w).format(i.updated_at,"fullDate")),1)]),"item.actions":a(({item:i})=>[c("div",de,[t(h,{text:e(n)("action.detail")},{activator:a(({props:u})=>[e(r).hasPermissions(["client_view"])?(V(),v(g,p({key:0},u,{color:"teal",icon:"mdi-eye",size:"x-small",rounded:"0",onClick:k=>e(l).fnDetailItem(i)}),null,16,["onClick"])):D("",!0)]),_:2},1032,["text"]),t(h,{text:e(n)("action.edit")},{activator:a(({props:u})=>[e(r).hasPermissions(["client_update"])?(V(),v(g,p({key:0},u,{color:"warning",icon:"mdi-square-edit-outline",size:"x-small",rounded:"0",onClick:k=>e(l).fnEditItem(i)}),null,16,["onClick"])):D("",!0)]),_:2},1032,["text"]),t(h,{text:e(n)("action.delete")},{activator:a(({props:u})=>[e(r).hasPermissions(["client_delete"])?(V(),v(g,p({key:0},u,{color:"red",icon:"mdi-trash-can-outline",size:"x-small",rounded:"0",onClick:k=>e(l).fnDelItem(i)}),null,16,["onClick"])):D("",!0)]),_:2},1032,["text"])])]),top:a(()=>[t(z,{modelValue:e(l).dialog,"onUpdate:modelValue":s[7]||(s[7]=i=>e(l).dialog=i),"max-width":"500",transition:"false",persistent:"",scrollable:"","no-click-animation":""},{activator:a(({props:i})=>[t(Q,{class:"justify-space-between ga-2 my-4 mx-0"},{default:a(()=>[t(R,{"max-width":"350"},{default:a(()=>[t(O,{modelValue:e(l).filter.search,"onUpdate:modelValue":s[0]||(s[0]=u=>e(l).filter.search=u),density:"compact",variant:"outlined",color:"primary",placeholder:e(n)("text.search_name"),"append-inner-icon":"mdi-magnify",clearable:"","hide-details":"",onKeyup:s[1]||(s[1]=K(u=>e(l).fnSearch(),["enter"]))},null,8,["modelValue","placeholder"])]),_:1}),e(b).mobile.value?D("",!0):(V(),v(J,{key:0})),t(g,{color:"success",height:"38",onClick:s[2]||(s[2]=u=>e(l).fnList())},{default:a(()=>[t(_,{start:""},{default:a(()=>[m("mdi-refresh")]),_:1}),m(" "+o(e(n)("action.refresh")),1)]),_:1}),t(g,p({color:"primary",height:"38"},i),{default:a(()=>[t(_,{start:""},{default:a(()=>[m("mdi-plus-thick")]),_:1}),m(" "+o(e(n)("action.create")),1)]),_:2},1040)]),_:2},1024)]),default:a(()=>[t(W,{modelValue:e(l).valid,"onUpdate:modelValue":s[5]||(s[5]=i=>e(l).valid=i),onSubmit:s[6]||(s[6]=M(i=>e(l).fnSave(),["prevent","stop"]))},{default:a(()=>[t($,null,{default:a(()=>[t(S,{class:"d-flex justify-space-between align-center font-weight-bold bg-primary pl-7"},{default:a(()=>[c("span",null,o(e(l).index==-1?e(n)("action.create"):e(n)("action.update"))+" "+o(e(n)("sidebar.client")),1),t(g,{icon:"mdi-close",variant:"text",loading:e(l).loading,onClick:s[3]||(s[3]=i=>e(l).fnCancel())},null,8,["loading"])]),_:1}),t(j,{class:"pb-0"},{default:a(()=>[t(X,{cols:"12",class:"pa-1"},{default:a(()=>[t(O,{modelValue:e(l).model.name,"onUpdate:modelValue":s[4]||(s[4]=i=>e(l).model.name=i),density:"compact",variant:"outlined",color:"primary",label:e(n)("text.name"),rules:[e(l).rules().required]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),t(I),t(U,{class:"mx-5"},{default:a(()=>[t(g,{color:"primary",variant:"flat",type:"submit",loading:e(l).loading},{default:a(()=>[m(o(e(l).index==-1?e(n)("action.create"):e(n)("action.update")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),t(z,{modelValue:e(l).dialogDetail,"onUpdate:modelValue":s[12]||(s[12]=i=>e(l).dialogDetail=i),"max-width":"500",transition:"false",persistent:"",scrollable:"","no-click-animation":""},{default:a(()=>[t($,null,{default:a(()=>[t(S,{class:"d-flex justify-space-between align-center font-weight-bold bg-primary pl-7"},{default:a(()=>[c("span",null,o(e(n)("action.detail"))+" "+o(e(n)("sidebar.client")),1),t(g,{icon:"mdi-close",variant:"text",loading:e(l).loading,onClick:s[8]||(s[8]=i=>e(l).fnCancel())},null,8,["loading"])]),_:1}),t(j,{class:"font-weight-bold py-2"},{default:a(()=>[t(Y,{density:"compact"},{default:a(()=>[t(x,{class:"px-1 my-2 bg-background"},{default:a(()=>[t(y,{class:"font-weight-bold"},{default:a(()=>[m(o(e(n)("text.name")),1)]),_:1}),c("span",re,o(e(l).model.name),1)]),_:1}),t(x,{class:"px-1 my-2 bg-background"},{default:a(()=>[t(y,{class:"font-weight-bold"},{default:a(()=>[m(o(e(n)("text.client_id")),1)]),_:1}),c("span",ce,[c("span",me,o(f(e(l).model.client_id)),1),t(h,{text:e(n)("action.copy")},{activator:a(({props:i})=>[t(_,p(i,{size:"18",class:"ml-1",onClick:s[9]||(s[9]=u=>e(r).fnCopy(e(l).model.client_id))}),{default:a(()=>[m("mdi-content-copy")]),_:2},1040)]),_:1},8,["text"])])]),_:1}),t(x,{class:"px-1 my-2 bg-background"},{default:a(()=>[t(y,{class:"font-weight-bold"},{default:a(()=>[m(o(e(n)("text.client_secret")),1)]),_:1}),c("span",ue,[c("span",fe,o(f(e(l).model.client_secret)),1),t(h,{text:e(n)("action.copy")},{activator:a(({props:i})=>[t(_,p(i,{size:"18",class:"ml-1",onClick:s[10]||(s[10]=u=>e(r).fnCopy(e(l).model.client_secret))}),{default:a(()=>[m("mdi-content-copy")]),_:2},1040)]),_:1},8,["text"])])]),_:1}),t(x,{class:"px-1 my-2 bg-background"},{default:a(()=>[t(y,{class:"font-weight-bold"},{default:a(()=>[m(o(e(n)("text.secure_key")),1)]),_:1}),c("span",pe,[c("span",ge,o(f(e(l).model.secure_key)),1),t(h,{text:e(n)("action.copy")},{activator:a(({props:i})=>[t(_,p(i,{size:"18",class:"ml-1",onClick:s[11]||(s[11]=u=>e(r).fnCopy(e(l).model.secure_key))}),{default:a(()=>[m("mdi-content-copy")]),_:2},1040)]),_:1},8,["text"])])]),_:1}),t(x,{class:"px-1 my-2 bg-background"},{default:a(()=>[t(y,{class:"font-weight-bold"},{default:a(()=>[m(o(e(n)("text.updated_by")),1)]),_:1}),c("span",_e,o(e(l).model.updated_by),1)]),_:1}),t(x,{class:"px-1 my-2 bg-background"},{default:a(()=>[t(y,{class:"font-weight-bold"},{default:a(()=>[m(o(e(n)("text.updated_at")),1)]),_:1}),c("span",he,o(e(w).format(e(l).model.updated_at,"fullDate")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(z,{modelValue:e(l).dialogDel,"onUpdate:modelValue":s[15]||(s[15]=i=>e(l).dialogDel=i),"max-width":"500",transition:"false",persistent:"",scrollable:"","no-click-animation":""},{default:a(()=>[t($,null,{default:a(()=>[t(S,{class:"d-flex justify-space-between align-center font-weight-bold bg-primary pl-7"},{default:a(()=>[c("span",null,o(e(n)("action.delete"))+" "+o(e(n)("sidebar.client")),1),t(g,{icon:"mdi-close",variant:"text",loading:e(l).loading,onClick:s[13]||(s[13]=i=>e(l).fnCancel())},null,8,["loading"])]),_:1}),t(j,{class:"font-weight-bold px-7"},{default:a(()=>[m(o(e(n)("text.delete"))+" ",1),c("span",xe,o(e(l).model.name),1)]),_:1}),t(I),t(U,{class:"mx-5"},{default:a(()=>[t(g,{color:"red",variant:"flat",loading:e(l).loading,onClick:s[14]||(s[14]=i=>e(l).fnDel())},{default:a(()=>[m(o(e(n)("action.delete")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I)]),_:2},1032,["items-per-page","items-per-page-options","headers","items","items-length","loading","search","onUpdate:options"])]),_:1})]),_:1}))}};export{Oe as default};
